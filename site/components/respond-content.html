<dom-module id="respond-content">
  <template></template>
</dom-module>

<script>
  Polymer({
	  	is: "respond-content",
	
	  	// element attributes
	  	properties: {
	  		url: { type: String } 
		},
		
		// attached
		attached: function() {
			
			var url = this.url.replace('/', '.');
			var context = this;
			
			// xhr
			var xhr = new XMLHttpRequest();
			xhr.open('GET', encodeURI('templates/page/' + url + '.html'));
			
			xhr.onload = function() {
			    if (xhr.status === 200) {
			    
			    	var data = xhr.responseText;
			    
			        // replace imagesURL with url
					data = respond.site.replaceAll(data, '{{site.ImagesUrl}}', respond.site.settings.ImagesUrl);
					data = respond.site.replaceAll(data, '{{site.ImagesURL}}', respond.site.settings.ImagesUrl);
				
					// turn returned HTML into a node
					var div = document.createElement('div');
					div.innerHTML = data;
					
					// apply to light dom
					Polymer.dom(context).appendChild(div);
					
			    }
			    else {
			        console.log('[respond.error] respond-form component: failed post, xhr.status='+xhr.status);
			    }
			};
			xhr.send(); 
		
		}
	
	});
</script>